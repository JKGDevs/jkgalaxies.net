var OSName="Unknown";const mirror0="Github.com",mirror1="Box.com",mirror2="ModDB.com",mirror3="JK2T.ddns.net",mirror4="JKHub.org",bin_win_hash_release="12C10FE854F5728DE37E5FCBFF5D5ADF0A1594E974C396C65BCAF0FA2BEA567D",bin_lin_hash_release="C461C3F750128B53521D4993477699C689E0EA6F44A787A1BBBBBD7888491074",bin_osx_hash_release="54641EA28CFBE9B0AD5A9DA3D8C695587B520A4224597043A7CDE13E4CA35847",bin_hash_release_array=[bin_win_hash_release,bin_lin_hash_release,bin_osx_hash_release],bin_win_hash_beta="38A4F971DAF764318CE48F23F9244BF9F68B468225458275BC57CE74DFB7BCA5",bin_lin_hash_beta="1EDE0D6239A21CABAE89EA473636FE65B776969110D4969B7E9F55C9DC272467",bin_osx_hash_beta="",bin_hash_beta_array=[bin_win_hash_beta,bin_lin_hash_beta,""],bin_win_url1="https://uvu.box.com/shared/static/gd59kdk6jpc592uccbrje5fmus7c5yq8.zip",bin_lin_url1="",bin_osx_url1="",bin_win_url2="",bin_lin_url2="",bin_osx_url2="",bin_win_url3="https://jk2t.ddns.net/Windows/jkgalaxies_winx86.zip",bin_lin_url3="https://jk2t.ddns.net/Linux/jkgalaxies_linuxx64.zip",bin_osx_url3="https://jk2t.ddns.net/macOS/jkgalaxies_macosxx86_64.zip",asset_url_release1="https://uvu.box.com/shared/static/z1j68r0v1m15v03ergfidtm3somp5ce2.zip",asset_url_release2="",asset_url_release3="https://jk2t.ddns.net/jkgfiles/z1j68r0v1m15v03ergfidtm3somp5ce2.zip",asset_release_hash="A007B9DDE2BC9D44A1DEFF52701B7BC8BB592B07D7D40D3936279153AF521320",asset_size_release="223.4 MB",asset_date_release="2018-07-07",asset_url_beta="https://uvu.box.com/shared/static/lztt5mayu4daj9szvg8v0rtds6vwmnmq.zip",asset_beta_hash="95124AA88281D79A1B08C205200074ED2E233901F80FDAD3BEFAF324F1C61D88",asset_size_beta="240.8 MB",asset_date_beta="2020-02-08",mapPack01_url_jkhub="https://jkhub.org/files/file/2652-jedi-knight-galaxies-map-bundle-1/",mapPack01_url_ddns="https://jk2t.ddns.net/jkgfiles/jkgalaxies-maps-v1.2.zip",mapPack01_url_box="https://uvu.box.com/shared/static/iw9gkh7p80wt0y28h1sd46lvk54v8bdv.zip",mapPack01_url_moddb="",mapPack01_hash="ECCB1B4A060628F6E5990F59AA0D0FBE81D0F41CF7A11850400804E8FABB60CD",mapPack_size="244 MB";function resizeMarginsVertMode(){window.innerHeight>window.innerWidth&&$(window).width()<768&&($(".maindiv").css("margin","0%"),$(".centerdivbig").css("margin","0%"),$(".centerdiv").css("margin","0%"),$(".centerdiv").css("margin","0%"),$("#navbarLogoImg").hide(),$("#navbar").css("font-size",18),$("#navbar a").css("padding-top",15))}function revealInstructionsSpoiler(){"none"==document.getElementById("instructionBody").style.display?document.getElementById("instructionBody").style.display="":document.getElementById("instructionBody").style.display="none"}function loadDirectoryText(){$("#directoryText").load("text/directoryText.txt")}function formatBytes(bytes,decimals=2){if(0===bytes)return"0 Bytes";const k=1024,dm=decimals<0?0:decimals,sizes=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(dm))+" "+sizes[i]}function DetectClientOS(){document.getElementById("downloadAssetBtn").href=asset_url_release1,document.getElementById("downloadAssetBtnSm").href=asset_url_release1,document.getElementById("downloadAssetBtnTestSm").href=asset_url_beta,document.getElementById("downloadType").innerHTML+="<br>",-1!=window.navigator.userAgent.indexOf("Windows NT 10.0")&&(OSName="Windows"),-1!=window.navigator.userAgent.indexOf("Windows NT 6.2")&&(OSName="Windows"),-1!=window.navigator.userAgent.indexOf("Windows NT 6.1")&&(OSName="Windows"),-1!=window.navigator.userAgent.indexOf("Windows NT 6.0")&&(OSName="Windows"),-1!=window.navigator.userAgent.indexOf("Windows NT 5.1")&&(OSName="WindowsXP"),-1!=window.navigator.userAgent.indexOf("Mac")&&(OSName="OSX"),-1!=window.navigator.userAgent.indexOf("Linux")&&(OSName="Linux"),"Windows"==OSName?document.getElementById("downloadType").innerHTML+=" Windows":"WindowsXP"==OSName?(document.getElementById("downloadType").innerHTML+=" Windows XP",alert("Warning, Windows XP is depreciated and unsupported.")):"OSX"==OSName?document.getElementById("downloadType").innerHTML+=" OSX":"Linux"==OSName?document.getElementById("downloadType").innerHTML+=" Linux":document.getElementById("downloadType").innerHTML="Download",console.log(OSName+" detected."),document.getElementById("downloadType").innerHTML+=" Client"}function obtainBuildType(OS_builds,version){var jkgtag="jkgalaxies_";return build_type="Windows"==OSName?OS_builds.indexOf(jkgtag+version+"_win.zip"):"WindowsXP"==OSName?OS_builds.indexOf(jkgtag+version+"_winXP.zip"):"Linux"==OSName?OS_builds.indexOf(jkgtag+version+"_linux.zip"):"OSX"==OSName?OS_builds.indexOf(jkgtag+version+"_osx.zip"):-1,build_type}function GetLatestReleaseInfo(repo,releasetype){if("test"==releasetype||"beta"==releasetype)repo="https://api.github.com/repos/"+repo+"/releases",releasetype="test";else{if("stable"!=releasetype&&"final"!=releasetype)return void console.log("Invalid release info request: type == "+releasetype.toLocaleString());repo="https://api.github.com/repos/"+repo+"/releases/latest",releasetype="stable"}$.getJSON(repo).done((function(json){var release=json;if("test"==releasetype)var totalDownloadCount=0,release=json[0];var OS_builds=[],build_type=0,downloadCount=0,version=release.tag_name;version=version.replace("Version","v");for(var asset="",i=0;i<release.assets.length;i++)downloadCount+=release.assets[i].download_count,OS_builds.push(release.assets[i].name);(build_type=obtainBuildType(OS_builds,version))<0?("test"==releasetype&&(document.getElementById("downloadBinBtn").href="#tableTestDownload"),"stable"==releasetype&&(document.getElementById("downloadBinBtn").href="#tablePrimaryDownload"),asset=release.assets[0]):(asset=release.assets[build_type],"test"==releasetype&&(document.getElementById("downloadBinBtnTestSm").href=asset.browser_download_url),"stable"==releasetype&&(document.getElementById("downloadBinBtn").href=asset.browser_download_url,document.getElementById("downloadBinBtnSm").href=asset.browser_download_url));var oneHour=36e5,oneDay=864e5,oneYear=31536e6,dateDiff=new Date-new Date(asset.updated_at),timeAgo;dateDiff<864e5?(timeAgo=(dateDiff/36e5).toFixed(1))<=1?timeAgo=" within the hour":timeAgo+=" hours ago":dateDiff<31536e6?(timeAgo=(dateDiff/864e5).toFixed(0),timeAgo+=1==timeAgo?" day ago":" days ago"):(timeAgo=(dateDiff/31536e6).toFixed(1),timeAgo+=1==timeAgo?" year ago":" years ago");var releaseInfo=version+" last updated "+timeAgo+".";downloadCount>0&&("test"==releasetype&&(document.getElementById("test-download-count").innerHTML+=downloadCount.toLocaleString()),"stable"==releasetype&&(document.getElementById("download-count").innerHTML+=downloadCount.toLocaleString())),"stable"==releasetype&&($(".release-info").text(releaseInfo),$(".patchnotes").attr("href",release.html_url),drawTable(version,release,asset,OS_builds,releasetype)),"test"==releasetype&&($(".test-release-info").text(releaseInfo),$(".test-patchnotes").attr("href",release.html_url),drawTable(version,release,asset,OS_builds,releasetype))}))}function drawTable(version,release,asset,OS_builds,releasetype){var assetHash="",binHashArr=[],whichTable="",asset_size="0 MB",asset_url="",asset_date="0000-00-00",assetMap01Hash=mapPack01_hash;if("test"==releasetype)assetHash=asset_beta_hash,whichTable="#tableTestDownload",binHashArr=bin_hash_beta_array,asset_size="240.8 MB",asset_url=asset_url_beta,asset_date="2020-02-08";else{if("stable"!=releasetype)return void console.log("Invalid release type detected, unable to draw table!");assetHash=asset_release_hash,whichTable="#tablePrimaryDownload",binHashArr=bin_hash_release_array,asset_size="223.4 MB",asset_url=asset_url_release1,asset_date="2018-07-07"}for(var i=0,bin_mirror_url2="",bin_mirror_url3="";i<3;i++){var OSName_temp=OSName,binHash="";switch(i){case 0:OSName="Windows",bin_mirror_url2=bin_win_url1,bin_mirror_url3=bin_win_url3,binHash=binHashArr[0];break;case 1:OSName="Linux",bin_mirror_url2="",bin_mirror_url3=bin_lin_url3,binHash=binHashArr[1];break;case 2:OSName="OSX",bin_mirror_url2="",bin_mirror_url3=bin_osx_url3,binHash=binHashArr[2]}if(build_type=obtainBuildType(OS_builds,version),assetHash=assetHash.toLowerCase(),assetMap01Hash=assetMap01Hash.toLowerCase(),binHash=binHash.toLowerCase(),build_type>=0){var fileSize=formatBytes((asset=release.assets[build_type]).size),cellContent0_1="",cellContent0_2="";"#tablePrimaryDownload"==whichTable&&(cellContent0_1='<td><a href="'+bin_mirror_url2+'" >'+mirror1+"</a></td>",cellContent0_2='<td><a href="'+bin_mirror_url3+'" >'+mirror3+"</a></td>"),$(whichTable+" tbody").append($("<tr>").append($("<td>").text("Binaries")).append($("<td>").text(OSName)).append($("<td>").text(fileSize)).append($("<td>").text(asset.download_count)).append($("<td>").append($("<a>").attr("href","#"+binHash).text(binHash.substring(0,7)).attr("title","SHA-256: "+binHash))).append($("<td>").text(asset.updated_at.substring(0,10))).append($("<td>").append($("<a>").attr("href",asset.browser_download_url).text(mirror0))).append(cellContent0_1).append(cellContent0_2))}OSName=OSName_temp}var cellContent1_0='<td><a href="'+asset_url+'" >'+mirror1+"</a></td>";if("#tablePrimaryDownload"==whichTable)var cellContent1_1='<td><a href="'+asset_url_release1+'" >'+mirror1+"</a></td>",cellContent1_2='<td><a href="'+asset_url_release3+'" >'+mirror3+"</a></td>";$(whichTable+" tbody").append($("<tr>").append($("<td>").text("Assets")).append($("<td>").text("All")).append($("<td>").text(asset_size)).append($("<td>").text("-")).append($("<td>").append($("<a>").attr("href","#"+assetHash).text(assetHash.substring(0,7)).attr("title","SHA-256: "+assetHash))).append($("<td>").text(asset_date)).append(cellContent1_0).append(cellContent1_1).append(cellContent1_2));var cellContent2_0='<td><a href="'+mapPack01_url_jkhub+'" >'+mirror4+"</a></td>";if("#tablePrimaryDownload"==whichTable)var cellContent2_1='<td><a href="'+mapPack01_url_box+'" >'+mirror1+"</a></td>",cellContent2_2='<td><a href="'+mapPack01_url_ddns+'" >'+mirror3+"</a></td>";$(whichTable+" tbody").append($("<tr>").append($("<td>").text("Map Pack #1")).append($("<td>").text("All")).append($("<td>").text("244 MB")).append($("<td>").text("-")).append($("<td>").append($("<a>").attr("href","#"+assetMap01Hash).text(assetMap01Hash.substring(0,7)).attr("title","SHA-256: "+assetMap01Hash))).append($("<td>").text("2016-11-03")).append(cellContent2_0).append(cellContent2_1).append(cellContent2_2))}window.onload=function(){var github_repo="JKGDevs/JediKnightGalaxies";DetectClientOS(),GetLatestReleaseInfo(github_repo,"test"),GetLatestReleaseInfo(github_repo,"stable"),loadDirectoryText(),resizeMarginsVertMode()};